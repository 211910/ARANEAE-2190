<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ARANEAE 2190</title>

<style>
body{
  background:#000;
  color:#00ff66;
  font-family:monospace;
  margin:0;
}

.container{
  padding:12px;
}

h1{
  text-align:center;
  margin:4px 0;
  font-size:22px;
}

.sub{
  text-align:center;
  font-size:14px;
  opacity:0.9;
}

#face{
  text-align:center;
  font-size:22px;
  margin:10px 0;
}

textarea{
  width:100%;
  height:140px;
  background:#020202;
  color:#00ff66;
  border:1px solid #00ff66;
  padding:12px;
  font-size:16px;
  border-radius:6px;
}

button{
  width:100%;
  padding:14px;
  margin-top:8px;
  font-size:16px;
  font-weight:bold;
  background:#000;
  color:#00ff66;
  border:1px solid #00ff66;
  border-radius:6px;
}

button:active{
  background:#00ff66;
  color:#000;
}

#chat{
  margin-top:12px;
  height:220px;
  overflow-y:auto;
  border:1px solid #00ff66;
  padding:8px;
  border-radius:6px;
}

.msg{
  margin-bottom:6px;
  word-wrap:break-word;
}
</style>
</head>

<body>
<div class="container">

<h1>ARANEAE 2190</h1>
<div class="sub">PUBLISHER : #21|#19|#10|</div>

<div id="face">(â€¢_â€¢)</div>

<textarea id="input" placeholder="Type message here..."></textarea>

<button onclick="sendMsg()">SEND (ENCODED)</button>
<button onclick="decodeInput()">DECODE BOX</button>
<button onclick="clearInput()">CLEAR</button>

<div id="chat"></div>

</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
/* ðŸ” FIREBASE CONFIG (PASTE YOURS) */
const firebaseConfig = {
  apiKey: "PASTE",
  authDomain: "PASTE",
  databaseURL: "PASTE",
  projectId: "PASTE"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database().ref("araneae_chat");

/* ASCII FACE */
const face = document.getElementById("face");
const faces = ["(â€¢_â€¢)","(â€¢oâ€¢)","(âš†_âš†)","(â€¢_â€¢)"];
let fi=0;
setInterval(()=>{
  face.textContent = faces[fi++ % faces.length];
},1200);

const input = document.getElementById("input");
input.addEventListener("input",()=>{
  face.textContent="(âš†oâš†)";
});

/* ENCODE */
function encodeText(t){
  let o="";
  for(let c of t.toUpperCase()){
    if(c===" ") o+=" ";
    else if(c>="A" && c<="Z") o+="#"+(c.charCodeAt(0)-64)+"|";
    else o+=c;
  }
  return o;
}

/* DECODE */
function decodeText(d){
  let o="",i=0;
  while(i<d.length){
    if(d[i]==="#"){
      let j=d.indexOf("|",i);
      if(j==-1) break;
      let n=parseInt(d.slice(i+1,j));
      o+= (n>=1 && n<=26) ? String.fromCharCode(n+64) : "?";
      i=j+1;
    }else{
      o+=d[i];
      i++;
    }
  }
  return o;
}

/* SEND */
function sendMsg(){
  if(!input.value.trim()) return;
  const encoded = encodeText(input.value);
  db.push({msg:encoded});
  input.value="";
  face.textContent="(â€¢_â€¢)";
}

/* RECEIVE */
db.limitToLast(100).on("child_added",snap=>{
  const div=document.createElement("div");
  div.className="msg";
  div.textContent=snap.val().msg;
  document.getElementById("chat").appendChild(div);
  document.getElementById("chat").scrollTop = 999999;
});

/* LOCAL ACTIONS */
function decodeInput(){
  input.value = decodeText(input.value);
}
function clearInput(){
  input.value="";
}
</script>

</body>
</html>
