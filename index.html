<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ARANEAE 2190</title>

<!-- OCR Library -->
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

<style>
body{
    background:#050505;
    color:#00ffcc;
    font-family:monospace;
    padding:15px;
}
h1{text-align:center;}
textarea{
    width:100%;
    height:200px;
    background:#0e0e0e;
    color:#00ffcc;
    border:1px solid #00ffcc;
    padding:12px;
    font-size:16px;
}
button{
    background:#00ffcc;
    color:#000;
    border:none;
    padding:10px 14px;
    margin:4px;
    font-weight:bold;
    cursor:pointer;
}
button:hover{background:#00cfa6;}
input[type=file]{margin-top:8px;}
</style>
</head>

<body>

<h1>ARANEAE 2190</h1>

<textarea id="box" placeholder="Type or paste text here..."></textarea>

<br>

<button onclick="encode()">ENCODE</button>
<button onclick="decode()">DECODE</button>
<button onclick="copyText()">COPY</button>
<button onclick="pasteText()">PASTE</button>
<button onclick="clearBox()">DELETE</button>
<br>
<button onclick="scrollUp()">SCROLL ▲</button>
<button onclick="scrollDown()">SCROLL ▼</button>

<br><br>
<b>IMAGE → DECODE</b><br>
<input type="file" accept="image/*" onchange="decodeImage(this)">

<script>
const box = document.getElementById("box");

/* ENCODE */
function encode(){
    let t = box.value.toUpperCase();
    let o = "";
    for(let c of t){
        if(c === " ") o += " ";
        else if(c >= "A" && c <= "Z")
            o += "#" + (c.charCodeAt(0)-64) + "|";
        else o += c;
    }
    box.value = o;
}

/* DECODE */
function decode(){
    let d = box.value;
    let o = "";
    let i = 0;

    while(i < d.length){
        if(d[i] === "#"){
            let j = d.indexOf("|", i);
            if(j === -1){o += "?"; break;}
            let n = parseInt(d.slice(i+1,j));
            if(n>=1 && n<=26) o += String.fromCharCode(n+64);
            else o += "?";
            i = j+1;
        }else{
            o += d[i];
            i++;
        }
    }
    box.value = o;
}

/* COPY */
function copyText(){
    box.select();
    document.execCommand("copy");
}

/* PASTE */
async function pasteText(){
    box.value = await navigator.clipboard.readText();
}

/* DELETE */
function clearBox(){
    box.value = "";
}

/* SCROLL */
function scrollUp(){
    box.scrollTop -= box.clientHeight / 10;
}
function scrollDown(){
    box.scrollTop += box.clientHeight / 10;
}

/* IMAGE OCR + DECODE */
function decodeImage(input){
    const file = input.files[0];
    if(!file) return;

    Tesseract.recognize(file, 'eng').then(({data:{text}})=>{
        box.value = text;
        decode();
    });
}
</script>

</body>
</html>
